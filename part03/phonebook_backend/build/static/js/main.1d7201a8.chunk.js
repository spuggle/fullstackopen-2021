(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{23:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),a=n(18),u=n.n(a),o=(n(23),n(9)),i=n(8),s=n(3),d=n(5),h=n.n(d),j="/api/persons",l=function(){return h.a.get(j).then((function(e){return e.data}))},b=function(e){return h.a.post(j,e).then((function(e){return e.data}))},f=function(e,t){return h.a.put("".concat(j,"/").concat(e),t).then((function(e){return e.data}))},O=function(e){return h.a.delete("".concat(j,"/").concat(e))},v=n(0),x=function(e){var t=e.text,n=e.value,c=e.handleChange;return Object(v.jsxs)("div",{children:[t,": ",Object(v.jsx)("input",{value:n,onChange:c})]})},m=function(e){var t=e.handleClick,n=e.handleNameChange,c=e.handleNumberChange,r=e.newName,a=e.newNumber;return Object(v.jsxs)("form",{children:[Object(v.jsx)(x,{text:"Name",value:r,handleChange:n}),Object(v.jsx)(x,{text:"Phone",value:a,handleChange:c}),Object(v.jsx)("div",{children:Object(v.jsx)("button",{type:"submit",onClick:t,children:"Add"})})]})},p=function(e){var t=e.records,n=e.handleRemove;return t.map((function(e){return Object(v.jsxs)("div",{children:[e.name," ",e.number," ",Object(v.jsx)("button",{onClick:function(){return n(e.id)},children:"Delete"})]},e.id)}))},g=function(e){var t=e.value,n=e.handleChange;return Object(v.jsxs)("div",{children:["Filter shown with: ",Object(v.jsx)("input",{value:t,onChange:n})]})},C=function(e){var t=e.text,n=e.type;return Object(v.jsx)("div",{id:"notification",className:n,children:t})},w={text:"",type:"none"},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";return{text:e,type:t}},N=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),u=Object(s.a)(a,2),d=u[0],h=u[1],j=Object(c.useState)(""),x=Object(s.a)(j,2),N=x[0],k=x[1],S=Object(c.useState)(""),E=Object(s.a)(S,2),R=E[0],A=E[1],D=Object(c.useState)(w),J=Object(s.a)(D,2),L=J[0],P=J[1];Object(c.useEffect)((function(){setTimeout((function(){return P(w)}),2e3)}),[L.text]);var B=R?n.filter((function(e){return e.name.toLowerCase().includes(R.toLowerCase())})):n;Object(c.useEffect)((function(){l().then((function(e){return r([].concat(Object(i.a)(n),Object(i.a)(e)))}))}),[]);return Object(v.jsxs)("div",{children:[Object(v.jsx)("h2",{children:"Phonebook"}),Object(v.jsx)(C,{text:L.text,type:L.type}),Object(v.jsx)(g,{value:R,handleChange:function(e){return A(e.target.value)}}),Object(v.jsx)("h3",{children:"Add a new"}),Object(v.jsx)(m,{handleClick:function(e){e.preventDefault();var t=n.find((function(e){return e.name===d}));t?window.confirm("".concat(d," is already added to the phonebook. Replace the old number with the provided one?"))&&f(t.id,Object(o.a)(Object(o.a)({},t),{},{number:N})).then((function(e){r(n.map((function(n){return n.id===t.id?e:n}))),P(y("Successfully updated ".concat(d,"'s number"),"success"))})).catch((function(e){P(y(e.response.data.error,"error")),404===e.response.status&&r(n.filter((function(e){return e.id!==t.id})))})):b({name:d,number:N}).then((function(e){r(n.concat(e)),P(y("Successfully added ".concat(d),"success"))})).catch((function(e){return P(y(e.response.data.error,"error"))}));h(""),k("")},handleNameChange:function(e){return h(e.target.value)},handleNumberChange:function(e){return k(e.target.value)},newName:d,newNumber:N}),Object(v.jsx)("h3",{children:"Numbers"}),Object(v.jsx)(p,{records:B,handleRemove:function(e){O(e).catch((function(e){return P(y(e.response.data.error,"error"))})).finally((function(){return r(n.filter((function(t){return t.id!==e})))}))}})]})};u.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(N,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.1d7201a8.chunk.js.map